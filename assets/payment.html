<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<!-- Zuora Public javascript library -->
<script type="text/javascript" src="https://static.zuora.com/Resources/libs/hosted/1.1.0/zuora-min.js"/></script>
<script>
<!-- optional params in case prepopulation of certain fields is desired-->
var prepopulateFields = {
   creditCardAddress1:"123 Any Street",
   creditCardAddress2:"Suite #999",
   creditCardCountry:"USA",
   creditCardHolderName:"John Doe"
};
 
// Sample params for rendering iframe on the client side
var params = {
	signature: "OASWF69sa0naTurXJ3zAihSWWIWNezHcJc5GoLo9CxyYy8Pim8oyCEYZLMmJbQGrCCVXdSbAqgt82J++R9I/VXpwNHBZSJB8q63qaYeRqEPeurSzAn7ceEXvM21bkzIds9OMVISpxWxdZ4w9Eru7ZXs5t18iHIbxMG+6uk8PE6cg9wCBLEFyBRpM1qiUesvVTLVBsi/x8qDMgcuWnVF69wyU5LaZ4Eq0PlgHLeEXmv6f+2rZzVHLkk/pDvR6mk/KLQwM0eZC3eYGFlxGJDe1frXwqB1q914ONQ0re4L42xOzu/zmKgyQs35ycn24QYpyu5MnVughwsISRl33BpFzEg==",
  token: "cqG2xLYT6VwbprQWxYUYF0h3UWh3avie",
  tenantId: "14890",
  key: "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA7xoxHlzWVKUQJvEJw3NWS0pBBsNyI8MSg+jascnK04rdD2oc8Oj4e1AvuiqDGbr7xmDgGFmqgV+URiBZa7GP8YqDO2cvapO056MHUdMhKveHEtupNSHRefhUsNfQ/j1/sLQq2pCrSteBm8wMWktOWQKcLcMcqXtNKrbASv8P9U2B1eE8rZtknj6ezHDPNDSPmN7VNEnjStDJUOX6mb0JoNWeAF6BOyPgDOIkRbtSdYJr8VKE1FhyAB9FHkc8QM5XlkSTOoAPfk7u40sgL7zHyACKzLzb6pg3lKF5uCckU1iggaDgmdCgtk9kxCVxzQlZe7Rhrs0VjXDr5VkloPXqPwIDAQAB",

   id:"2c92c0f85721ff7c015731d73546108c", <!-- pageId-->
   style:"overlay",
   submitEnabled:"true", 
   locale:"fr_FR", 
   param_supportedTypes:"Visa,MasterCard",
   url:"https://www.zuora.com/apps/PublicHostedPageLite.do",
   paymentGateway:"Test" //payment gateway name
};

function callback(response) {
   if(response.success) {
      var redirectUrl = "../thanks?refid="+response.refId+"&field_passthrough1="+response.field_passthrough1;
      window.location.replace(redirectUrl);
   } else {
      alert("errorcode="+response.errorCode + ", errorMessage="+response.errorMessage);
   }
}
        
function loadHostedPage() {
   Z.render(
      params,
      prepopulateFields,
      callback
   );
}

function getSignature(){
	var req = {
   "uri": "https://www.zuora.com/apps/PublicHostedPageLite.do",
   "method": "POST",
   "pageId":"2c92c0f85721ff7c015731d73546108c"
};
	var xhr = new XMLHttpRequest();
	xhr.onreadystatechange = function () {
		if (this.readyState == 4 && this.status == 200) {
           alert(this.responseText);
        }
	}
	xhr.open("POST", "https://apisandbox-api.zuora.com/rest/v1/rsa-signatures");
	xhr.setRequestHeader("Authorization", "Basic " + btoa("nitin.jain@nutanix.com:Nutanix1"));
	xhr.setRequestHeader("Content-Type", "application/json");
	xhr.setRequestHeader("Accept", "application/json");
	xhr.send(JSON.stringify(req));
}
</script>
</head>

<body onload="getSignature();">
   <div id="zuora_payment" ></div>
</body>